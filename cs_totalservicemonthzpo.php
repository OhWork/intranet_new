<script>
            $(document).ready(function() {

                $('#table1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table1_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table2').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table2_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table3').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table3_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table4').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table4_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table5').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table5_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table6').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table6_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table7').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table7_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table8').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table8_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table9').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table9_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
    $('#table10').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
        $('#table10_1').DataTable( {
                "ordering": false,
                "searching": false,
                "paging":   false,
                "language": {
                    "lengthMenu": "แสดง _MENU_ แถวต่อหน้า",
                    "zeroRecords": "ไม่พบข้อมูล",
                    "info": "",
                    "infoEmpty": ""
                }
    } );
} );
</script>
<?php
    if (!empty($_SESSION['user_name'])):
	include_once 'database/db_tools.php';
	include_once 'connect.php';
	$user_zoo = $_SESSION['subzoo_zoo_zoo_id'];
    $form = new form();
    $lbyear = new label('กรุณากรอกปี  (พ.ศ.) ที่ต้องการเลือก เช่น 25xx');
    $txtyearonly = new textfield('yearonly','','form-control css-require','','');
    $txtyearqua = new textfield('yearqua','','form-control css-require','','');
    $txtyearmonth = new textfield('yearmonth','','form-control css-require','','');
    $selectmonth = new selectMenu();
    $selectmonth->name = "month";
    $selectmonth->addItem('กรุณาเลือกเดือน','');
    $selectmonth->addItem('มกราคม','01');
    $selectmonth->addItem('กุมภาพันธ์','02');
    $selectmonth->addItem('มีนาคม','03');
    $selectmonth->addItem('เมษายน','04');
    $selectmonth->addItem('พฤษภาคม','05');
    $selectmonth->addItem('มิถุนายน','06');
    $selectmonth->addItem('กรกฏาคม','07');
    $selectmonth->addItem('สิงหาคม','08');
    $selectmonth->addItem('กันยายน','09');
    $selectmonth->addItem('ตุลาคม','10');
    $selectmonth->addItem('พฤศจิกายน','11');
    $selectmonth->addItem('ธันวาคม','12');
    $selectquarter = new selectMenu();
    $selectquarter->name = "quarter";
    $selectquarter->addItem('กรุณาเลือกไตรมาส','');
    $selectquarter->addItem('ไตรมาสที่ 1 (1 ต.ค. - 31 ธ.ค.)','1');
    $selectquarter->addItem('ไตรมาสที่ 2 (1 ม.ค. - 31 มี.ค.)','2');
    $selectquarter->addItem('ไตรมาสที่ 3 (1 เม.ย. - 30 มิ.ย.)','3');
    $selectquarter->addItem('ไตรมาสที่ 4 (1 ก.ค. - 30 ก.ย.)','4');
	$button = new buttonok('ค้นหา','submit','btn btn-success col-md-12 printdisplaynone','submit');
	   echo $form->open('','','col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12','','');
	   ?>
<div class='row'>
<div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1"></div>
<div class='col-xl-10 col-lg-10 col-md-10 col-sm-10 col-10 printcenter printdisplaynone' style="padding-bottom:40px;border:solid #ddd 1px;border-radius: 7px;">
    <div class='row' style="margin-top:0;">
        <div class='col-md-12 printdisplaynone' style="border-bottom:solid 1px #666666;padding-top:14px;">
            <h4>เลือกสิ่งที่ต้องการค้นหา</h4>
        </div>
        <div class='col-md-12 printdisplaynone' style="margin-top: 40px;">
            <div class='row'>
                <div class='col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1'></div>
                <div class='btn-group btn-group-toggle col-xl-10 col-lg-10 col-md-10 col-sm-10 col-10' data-toggle='buttons'>
                    <label class="btn btn-success active" style="width:33%">
                        <input type="radio" name="search" value="1" onChange="swapConfig(this)" id="searchmonth" autocomplete="off" checked>เดือน
                    </label>
                    <label class="btn btn-success" style="width:33%">
                        <input type="radio" name="search" value="2" onChange="swapConfig(this)" id="searchquarter" autocomplete="off">ไตรมาส
                    </label>
                    <label class="btn btn-success" style="width:33%">
                        <input type="radio" name="search" value="3" onChange="swapConfig(this)" id="searchyear" autocomplete="off">ปี
                    </label>
                </div>
                <div class='col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1'></div>
			</div>
		</div>
<!-- ชุดเดือน -->
		<div class="col-md-12 printdisplaynone" style="margin-top: 40px;" id="searchmonthSettings">
			<div class="row">
				<div class='col-xl-2 col-lg-1 col-md-1 col-sm-2 col-2' style="float:left;"></div>
				<div class='col-xl-3 col-lg-4 col-md-4 col-sm-3 col-3' style="float:left;"><?php echo $selectmonth;?></div>
				<div class='col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3' style="padding-top: 7px;float:left;"><center><?php echo $lbyear;?></center></div>
				<div class='col-xl-2 col-lg-2 col-md-3 col-sm-2 col-2' style="float:left;"><?php echo $txtyearmonth;?></div>
				<div class='col-xl-2 col-lg-2 col-md-1 col-sm-2 col-2' style="float:left;"></div>
			</div>
		</div>
<!--   ไตรมาส -->
		<div class="col-md-12 printdisplaynone" style="margin-top: 40px;display:none;" id="searchquarterSettings">
			<div class="row">
				<div class='col-xl-3 col-lg-1 col-md-1 col-sm-3 col-3' style="float:left;"></div>
				<div class='col-xl-2 col-lg-4 col-md-4 col-sm-2 col-2' style="float:left;"><?php echo $selectquarter;?></div>
				<div class='col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3' style="padding-top: 7px;float:left;"><center><?php echo $lbyear;?></center></div>
				<div class='col-xl-2 col-lg-2 col-md-3 col-sm-2 col-2' style="float:left;"><?php echo $txtyearqua;?></div>
				<div class='col-xl-2 col-lg-2 col-md-3 col-sm-2 col-2' style="float:left;"></div>
			</div>
		</div>
<!--   ปี -->
		<div class="col-md-12 printdisplaynone" style="margin-top: 40px;display:none;" id="searchyearSettings">
			<div class="row">
				<div class='col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3' style="float:left;"></div>
				<div class='col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3' style="padding-top: 7px;float:left;"><center><?php echo $lbyear;?></center></div>
				<div class='col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3' style="float:left;"><?php echo $txtyearonly;?></div>
				<div class='col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3' style="float:left;"></div>
			</div>
		</div>
<!-- ปุ่มตกลง -->
		<div class="col-md-12 printdisplaynone" style="margin-top: 40px;">
			<div class="row">
				<div class='col-xl-4 col-lg-4 col-md-4 col-sm-5 col-5' style="float:left;"></div>
				<div class='col-xl-4 col-lg-4 col-md-4 col-sm-2 col-2 printdisplaynone' style="float:left;"><center><?php echo $button; ?></center></div>
				<div class='col-xl-4 col-lg-4 col-md-4 col-sm-5 col-5' style="float:left;"></div>
			</div>
		</div>
	</div>
</div>
<div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1"></div>
</div>
<?php
       echo $form->close();
      if (isset($_POST['submit'])) {
@$zrs = $db->findByPK('zoo','zoo_id',$zoo)->executeAssoc();
@$zoo_name = $zrs['zoo_name'];
@$yearthai  = $_POST['year'];    // แปลง ปีไทย เป็น ปีฝรั่ง
        isset($_POST['search'])?$search  = $_POST['search']:$search='';
        isset($_POST['month'])?$month = $_POST['month']:$month='';
        isset($_POST['quarter'])?$qua  = $_POST['quarter']:$qua='';
        isset($_POST['yearqua'])?$yearqua  = $_POST['yearqua']:$yearqua='';
        isset($_POST['yearonly'])?$yearonly  = $_POST['yearonly']:$yearonly='';
        isset($_POST['yearmonth'])?$yearmonth  = $_POST['yearmonth']:$yearmonth='';

  if($month){
         if($yearmonth){
            $qua = "BETWEEN '$yearmonth-$month-01 00:00:00' AND  '$yearmonth-$month-31 23:59:59' ";
        }else{
            $yearmonth = date("Y");
            $qua = "BETWEEN '$yearmonth-$month-01 00:00:00' AND  '$yearmonth-$month-31 23:59:59' ";
        }
    }else if($qua){
        switch ($qua){
            case 1:
            $yearqua1=$yearqua-1;
                $qua="BETWEEN '$yearqua1-10-01 00:00:00' AND '$yearqua1-12-31 23:59:59' ";
                $textqua = "ไตรมาสที่ 1 (1 ต.ค. - 31 ธ.ค.)";

            break;
            case 2:
                $qua="BETWEEN '$yearqua-01-01 00:00:00' AND '$yearqua-3-31 23:59:59' ";
                $textqua = "ไตรมาสที่ 2 (1 ม.ค. - 31 มี.ค.)";
            break;
            case 3:
                $qua="BETWEEN '$yearqua-04-01 00:00:00' AND  '$yearqua-06-30 23:59:59' ";
                $textqua = "ไตรมาสที่ 3 (1 เม.ย. - 30 มิ.ย.)";
            break;
            case 4:
                $qua="BETWEEN '$yearqua-07-01 00:00:00' AND  '$yearqua-09-30 23:59:59' ";
                $textqua = "ไตรมาสที่ 4 (1 ก.ค. - 30 ก.ย.)";
            break;
        }
    }else if($yearonly){
        $qua = "BETWEEN '$yearonly-01-01 00:00:00' AND  '$yearonly-12-31 23:59:59' ";
    }else{
        $date = date("Y-m-d");
        $qua = " BETWEEN '$date' AND  '$date' AND ";
    }

    if($search == 1){
    switch($month){
        case 1: $monthtxt = "มกราคม"; break;
        case 2: $monthtxt = "กุมภาพันธ์"; break;
        case 3: $monthtxt = "มีนาคม"; break;
        case 4: $monthtxt = "เมษายน"; break;
        case 5: $monthtxt = "พฤษภาคม"; break;
        case 6: $monthtxt = "มิถุนายน"; break;
        case 7: $monthtxt = "กรกฏาคม"; break;
        case 8: $monthtxt = "สิงหาคม"; break;
        case 9: $monthtxt = "กันยายน"; break;
        case 10: $monthtxt = "ตุลาคม"; break;
        case 11: $monthtxt = "พฤศจิกายน"; break;
        case 12: $monthtxt = "ธันวาคม"; break;
    }
    }
$CY = $db->countTableBETWEEN24('problem','zoo','problem.subzoo_zoo_zoo_id','zoo.zoo_id','zoo.zoo_type',1,'problem_status',"'Y'",'problem_date',$qua)->executeRowcount();
$CS = $db->countTableBETWEEN24('problem','zoo','problem.subzoo_zoo_zoo_id','zoo.zoo_id','zoo.zoo_type',1,'problem_status',"'S'",'problem_date',$qua)->executeRowcount();
$CN = $db->countTableBETWEEN24('problem','zoo','problem.subzoo_zoo_zoo_id','zoo.zoo_id','zoo.zoo_type',1,'problem_status',"'N'",'problem_date',$qua)->executeRowcount();
$counttotal =  $CS+$CY+$CN;
//  สำนักตรวจสอบ
    $rs1 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักตรวจสอบ' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();

$CY1 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักตรวจสอบ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS1 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักตรวจสอบ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN1 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักตรวจสอบ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal1 =  $CS1+$CY1+$CN1;
$rsp1 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักตรวจสอบ' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();


 //  สำนักบริหารกลาง
    $rs2 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 (zoo.zoo_name = 'สำนักบริหารกลาง' OR zoo.zoo_name = 'ผู้อำนวยการองค์การสวนสัตว์' OR zoo.zoo_name = 'รองผู้อำนวยการองค์การสวนสัตว์') AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY2 = $db->countTableBETWEENOR48('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'problem_status',"'Y'",
                                'zoo.zoo_name',"'สำนักบริหารกลาง'",
                                'zoo.zoo_name',"'ผู้อำนวยการองค์การสวนสัตว์'",
                                'zoo.zoo_name',"'รองผู้อำนวยการองค์การสวนสัตว์'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_date',$qua)->executeRowcount();
$CS2 = $db->countTableBETWEENOR48('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'problem_status',"'S'",
                                'zoo.zoo_name',"'สำนักบริหารกลาง'",
                                'zoo.zoo_name',"'ผู้อำนวยการองค์การสวนสัตว์'",
                                'zoo.zoo_name',"'รองผู้อำนวยการองค์การสวนสัตว์'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_date',$qua)->executeRowcount();
$CN2 = $db->countTableBETWEENOR48('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'problem_status',"'N'",
                                'zoo.zoo_name',"'สำนักบริหารกลาง'",
                                'zoo.zoo_name',"'ผู้อำนวยการองค์การสวนสัตว์'",
                                'zoo.zoo_name',"'รองผู้อำนวยการองค์การสวนสัตว์'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_date',$qua)->executeRowcount();
$counttotal2 =  $CS2+$CY2+$CN2;
$rsp2 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 (zoo.zoo_name = 'สำนักบริหารกลาง' OR zoo.zoo_name = 'ผู้อำนวยการองค์การสวนสัตว์' OR zoo.zoo_name = 'รองผู้อำนวยการองค์การสวนสัตว์') AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //  สำนักพัฒนาธุรกิจ
    $rs3 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักพัฒนาธุรกิจ' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY3 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักพัฒนาธุรกิจ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS3 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักพัฒนาธุรกิจ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN3 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักพัฒนาธุรกิจ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal3 =  $CS3+$CY3+$CN3;
$rsp3 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักพัฒนาธุรกิจ' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //สำนักกฎหมาย
     $rs4 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักกฎหมาย' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY4 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักกฎหมาย'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS4 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักกฎหมาย'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN4 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักกฎหมาย'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal4 =  $CS4+$CY4+$CN4;
$rsp4 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักกฎหมาย' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //สำนักการเงินและทรัพย์สิน
     $rs5 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักการเงินและทรัพย์สิน' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY5 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักการเงินและทรัพย์สิน'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS5 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักการเงินและทรัพย์สิน'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN5 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักการเงินและทรัพย์สิน'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal5 =  $CS5+$CY5+$CN5;
$rsp5 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักการเงินและทรัพย์สิน' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //สำนักยุทธศาสตร์และแผน
     $rs6 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักยุทธศาสตร์และแผน' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY6 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักยุทธศาสตร์และแผน'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS6 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักยุทธศาสตร์และแผน'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN6 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักยุทธศาสตร์และแผน'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal6 =  $CS6+$CY6+$CN6;
$rsp6 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักยุทธศาสตร์และแผน' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //สำนักอนุรักษ์และวิจัย
 $rs7 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักอนุรักษ์และวิจัย' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY7 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักอนุรักษ์และวิจัย'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS7 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักอนุรักษ์และวิจัย'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN7 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักอนุรักษ์และวิจัย'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal7 =  $CS7+$CY7+$CN7;
$rsp7 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักอนุรักษ์และวิจัย' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //สำนักบริหารทรัพยากรบุคคล
 $rs8 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักบริหารทรัพยากรบุคคล' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY8 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักบริหารทรัพยากรบุคคล'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS8 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักบริหารทรัพยากรบุคคล'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN8 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักบริหารทรัพยากรบุคคล'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal8 =  $CS8+$CY8+$CN8;
$rsp8 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักบริหารทรัพยากรบุคคล' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //สำนักดิจิทัลและสารสนเทศ
 $rs9 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สำนักดิจิทัลและสารสนเทศ' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY9 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักดิจิทัลและสารสนเทศ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS9 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักดิจิทัลและสารสนเทศ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN9 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สำนักดิจิทัลและสารสนเทศ'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal9 =  $CS9+$CY9+$CN9;
$rsp9 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สำนักดิจิทัลและสารสนเทศ' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 //สถาบันบริหารจัดการสวนสัตว์
 $rs10 = $db->specifytable("subtypetools.subtypetools_name AS STT,
COUNT(problem.subtypetools_subtypetools_id) AS C_A,
SUM(IF(problem_status = 'N',1,0)) AS C_N,
SUM(IF(problem_status = 'Y',1,0)) AS C_Y,
SUM(IF(problem_status = 'S',1,0)) AS C_S",
'problem,subtypetools,subzoo,zoo',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 zoo.zoo_name = 'สถาบันบริหารจัดการสวนสัตว์' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem.subtypetools_subtypetools_id")->execute();
 $CY10 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สถาบันบริหารจัดการสวนสัตว์'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'Y'",
                                'problem_date',$qua)->executeRowcount();
$CS10 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สถาบันบริหารจัดการสวนสัตว์'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'S'",
                                'problem_date',$qua)->executeRowcount();
$CN10 = $db->countTableBETWEEN46('problem','subtypetools','subzoo','zoo',
                                'problem.subtypetools_subtypetools_id','subtypetools.subtypetools_id',
                                'problem.subzoo_subzoo_id','subzoo.subzoo_id',
                                'zoo.zoo_name',"'สถาบันบริหารจัดการสวนสัตว์'",
                                'problem.subzoo_zoo_zoo_id','zoo.zoo_id',
                                'problem_status',"'N'",
                                'problem_date',$qua)->executeRowcount();
$counttotal10 =  $CS10+$CY10+$CN10;
$rsp10 = $db->specifytable("user.user_name AS name, user.user_last AS lastname,
SUM(IF(problem_status = 'Y',1,0)) AS adminfix",
'problem,subtypetools,subzoo,zoo,user',
"problem.subtypetools_subtypetools_id = subtypetools.subtypetools_id AND
 problem.subzoo_subzoo_id = subzoo.subzoo_id AND
 problem.problem_adminfix = user.user_id AND
 zoo.zoo_name = 'สถาบันบริหารจัดการสวนสัตว์' AND
 problem.subzoo_zoo_zoo_id = zoo.zoo_id AND problem_date ".$qua."
 GROUP BY problem_adminfix")->execute();
 ?>
<div class='col-md-12'>
	<div class='row'>
		<div class='col-md-12 reporthead test'>
			<Center><img src='images/logo/ZPOT.png'></center>
		</div>
		<div class='col-md-12 test'>
			<center>รายงานการซ่อม/บริการคอมพิวเตอร์ขององค์การสวนสัตว์</center>
		</div>
		<div class='col-md-12' style="float:left;">
			<center>
				<?php
    				if($month){
    				echo "ประจำเดือน ".$monthtxt." ปี  ".$yearmonth;
    				}else if($textqua){
                    echo $textqua;
                    }else if($yearonly){
                    echo "ประจำปี ".$yearonly;
                    }
    				?>
			</center>
		</div>
		<div class='col-md-12 test'>
            <center>ยอดรวม จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal;?> ครั้ง</center>
        </div>
 <!-- สำนักตรวจสอบ -->
  <?php if(!empty($rs1)){?>
        <div class='col-md-12'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักตรวจสอบ</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal1;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY1; ?> ครั้ง</p>
				</div>
				<div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table1';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs1);
					
					?>
				</div>
			</div>
                        <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table1_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp1);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักบริหารกลาง -->
 <?php if(!empty($rs2)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักบริหารกลาง</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal2;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY2; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
	<?php
				$columns = array('STT','C_N','C_S','C_Y');
				$grid = new gridView();
				$grid->pr = 'problem_id';
				$grid->header = array('<b><center>ปัญหา</center></b>',
									  '<b><center>รอดำเนินการ</center></b>',
									  '<b><center>ระหว่างดำเนินการ</center></b>',
									  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
				$grid->name = 'table2';
				$grid->width = array('25%','25%','25%','25%');
				$grid->renderFromDB($columns,$rs2);
				
	?>          </div>
			</div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table2_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp2);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักพัฒนาธุรกิจ -->
  <?php if(!empty($rs3)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักพัฒนาธุรกิจ</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal3; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY3; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table3';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs3);
					
					?>
				</div>
            </div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table3_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp3);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักกฎหมาย-->
  <?php if(!empty($rs4)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักกฎหมาย</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal4;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY4; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table4';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs4);
					
					?>
				</div>
            </div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table4_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp4);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักการเงินและทรัพย์สิน -->
  <?php if(!empty($rs5)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักการเงินและทรัพย์สิน</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal5;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY5; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table5';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs5);
					
					?>
				</div>
			</div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table5_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp5);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักยุทธศาสตร์และแผน -->
  <?php if(!empty($rs6)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักยุทธศาสตร์และแผน</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal6;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY6; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table6';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs6);
					
					?>
				</div>
            </div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table6_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp6);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักอนุรักษ์และวิจัย -->
   <?php if(!empty($rs7)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักอนุรักษ์และวิจัย</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal7;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY7; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table7';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs7);
					
					?>
				</div>
            </div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table7_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp7);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักบริหารทรัพยากรบุคคล -->
   <?php if(!empty($rs8)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักบริหารทรัพยากรบุคคล</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal8;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY8; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table8';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs8);
					
					?>
				</div>
            </div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table8_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp8);
					}
					?>
				</div>
                        </div>
        </div>
 <!-- สำนักดิจิทัลและสารสนเทศ -->
   <?php if(!empty($rs9)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สำนักดิจิทัลและสารสนเทศ</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal9;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY9; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
						$columns = array('STT','C_N','C_S','C_Y');
						$grid = new gridView();
						$grid->pr = 'problem_id';
						$grid->header = array('<b><center>ปัญหา</center></b>',
											  '<b><center>รอดำเนินการ</center></b>',
											  '<b><center>ระหว่างดำเนินการ</center></b>',
											  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
						$grid->name = 'table9';
						$grid->width = array('25%','25%','25%','25%');
						$grid->renderFromDB($columns,$rs9);
					
					?>
				</div>
            </div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table9_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp9);
					}
					?>
				</div>
                        </div>
        </div>
<!-- สถาบันบริหารจัดการสวนสัตว์  -->
  <?php if(!empty($rs10)){?>
        <div class='col-md-12 page'>
			<div class='row'>
				<div class='col-md-12'>
					<h4><p>สถาบันบริหารจัดการสวนสัตว์</p></h4>
				</div>
				<div class='col-md-12'>
					<p><b><u>สรุป</u></b> จำนวนการขอรับบริการทั้งหมด <?php echo $counttotal10;?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<p>จำนวนการให้บริการแล้วเสร็จทั้งหมด <?php echo $CY10; ?> ครั้ง</p>
				</div>
				<div class='col-md-12'>
					<?php
					$columns = array('STT','C_N','C_S','C_Y');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ปัญหา</center></b>',
										  '<b><center>รอดำเนินการ</center></b>',
										  '<b><center>ระหว่างดำเนินการ</center></b>',
										  '<b><center>ดำเนินการเสร็จสิ้น</center></b>');
					$grid->name = 'table10';
					$grid->width = array('25%','25%','25%','25%');
					$grid->renderFromDB($columns,$rs10);
					
					?>
				</div>
			</div>
                                    <div class='row'>
                            <div class='col-md-12'>
                                <p><b><u>เจ้าหน้าที่ผู้ดำเนินการ</u></b>
                            </div>
                            <div class='col-md-12 page' style="float:left;">
					<?php
					$columns = array('name','lastname','adminfix');
					$grid = new gridView();
					$grid->pr = 'problem_id';
					$grid->header = array('<b><center>ชื่อ</center></b>',
                                                              '<b><center>นามสกุล</center></b>',
                                                              '<b><center>จำนวน</center></b>');
					$grid->name = 'table10_1';
					$grid->width = array('20%','20%','60%');
					$grid->renderFromDB($columns,$rsp10);
					}
					?>
				</div>
                        </div>
        </div>
		<div class='col-md-12 test'>
			<p><u>หมายเหตุ </u></p>
		</div>
		<?php
			}
			?>
<?php endif;?>
	</div>
</div>
